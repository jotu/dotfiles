# Purpose: ChezMoi prompt configuration to populate `.data` used by templates.
# Follow AGENT.md: security-first; do not store secrets, only references or toggles.
# This file defines interactive prompts for initial setup and normalizes data keys.
#
# Usage:
# - `chezmoi init <repo-url>` and follow prompts
# - `chezmoi apply --preview` to review changes
# - `chezmoi data` to inspect resolved keys

[data]
  # Identity
  name = {{ prompt "Your full name" | quote }}
  editor = {{ prompt "Preferred editor command (e.g., 'zed --wait', 'nano', 'vim')" "zed --wait" | quote }}

  # Personal Git
  [data.personal.git]
    email = {{ prompt "Personal Git email" | quote }}
    signingKey = {{ prompt "Personal GPG signing key fingerprint" | quote }}

  # Personal SSH identity file name (only the filename, not the full path)
  [data.personal.ssh]
    identityFile = {{ prompt "Personal SSH identity filename (e.g., id_ed25519_personal)" "id_ed25519_personal" | quote }}

  # Work profile toggle
  [data.work]
    enable = {{ promptBool "Enable work profile?" false }}

  {{ if .data.work.enable }}
  # Work Git
  [data.work.git]
    email = {{ prompt "Work Git email" | quote }}
    signingKey = {{ prompt "Work GPG signing key fingerprint" | quote }}

  # Work SSH (organization identity filename; no secrets)
  [data.work.ssh.organization]
    identityFile = {{ prompt "Work org SSH identity filename (e.g., id_ed25519_org)" "id_ed25519_org" | quote }}

  # Work employee code (used for Keychain lookups or Kerberos)
  [data.work.employee]
    code = {{ prompt "Employee code (for keychain lookups)" | quote }}

  # Work domain (Kerberos/SSO; e.g., corp.example.com)
  [data.work.domain]
    name = {{ prompt "Work domain (e.g., corp.example.com)" | quote }}

  # Work SAML login URL (used by convenience alias)
  [data.work.saml]
    auth.url = {{ prompt "Work SAML login URL (optional)" "" | quote }}

  # Work AWS default profile (optional)
  [data.work.aws]
    profile = {{ prompt "Work AWS default profile (optional)" "" | quote }}
  {{ end }}

  # Prompt/CLI toggles
  [data.prompt]
    starship.enable_kubernetes = {{ promptBool "Enable Kubernetes module in starship?" true }}
    shell.show_sudo = {{ promptBool "Show sudo status in prompt?" true }}
    shell.show_docker_context = {{ promptBool "Show Docker context in prompt?" false }}
    aws.profile = {{ prompt "Default AWS profile (if not using work profile; optional)" "" | quote }}

  # Developer languages list (used to toggle Starship modules, tooling, etc.)
  # Accepts comma-separated input; normalized to slice.
  [data.dev]
    langs = {{ prompt "Languages (comma-separated; e.g., nodejs,python,golang,rust)" "nodejs,python" | toSlice | quote }}

  # GitHub
  [data.github]
    username = {{ prompt "GitHub username" | quote }}

# Notes:
# - Never store secrets in `.data`; reference tokens via OS secret stores (Keychain).
# - Identity fields here are filenames, emails, and key fingerprints only.
# - Work-related fields are conditional on `data.work.enable`.
# - You can re-run prompts using `chezmoi re-add --prompt` if you need to update values.
