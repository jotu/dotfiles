{{ if and (eq .chezmoi.os "darwin") (eq .chezmoi.arch "arm64") }}
export BREW_HOME="/opt/homebrew"
{{ else if and (eq .chezmoi.os "darwin") (eq .chezmoi.arch "amd64") }}
export BREW_HOME="/usr/local"
{{ end }}

# openssl
export LDFLAGS="-L$BREW_HOME/opt/openssl@3/lib"
export CPPFLAGS="-I$BREW_HOME/opt/openssl@3/include"
export PATH="$BREW_HOME/opt/openssl@3/bin:$PATH"

{{- if .work.enable }}
# aws
#export AWS_PROFILE={{ .work.aws.profile | quote }}
#export AWS_DEFAULT_PROFILE=$AWS_PROFILE

# aws vault
export AWS_VAULT_KEYCHAIN_NAME=login
export AWS_VAULT_BACKEND=keychain

# GITHUB
# Keep gh auth controlled explicitly by your chosen GH_CONFIG_DIR/session.
# Only set MISE_GITHUB_TOKEN for mise GitHub API access.
export MISE_GITHUB_TOKEN={{ keyring "github" .github.username | quote }}

# local backstage dev
#AUTH_GITHUB_CLIENT_ID=$(security find-generic-password -w -s 'GITHUB_OAUTH_CLIENT_ID' -a '{{ .work.employee.code }}')
#AUTH_GITHUB_CLIENT_SECRET=$(security find-generic-password -w -s 'GITHUB_OAUTH_CLIENT_SECRET' -a '{{ .work.employee.code }}')
#export AUTH_GITHUB_CLIENT_ID
#export AUTH_GITHUB_CLIENT_SECRET

# JetBrains Toolbox path removed for portability; add via local machine config if needed
{{ end }}
